(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{445:function(e,t,r){Promise.resolve().then(r.bind(r,6873))},6873:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var n=r(7437),s=r(7648),a=r(2265),l=r(2381),o=r(279),i=r(9820),c=r(5336);function u(){let{login:e,loading:t}=(0,c.a)(),[r,u]=(0,a.useState)(""),[d,h]=(0,a.useState)(""),[f,g]=(0,a.useState)(null),p=async t=>{t.preventDefault(),g(null);let n=await e(r,d);n.ok||g(n.message||"Login failed. Check your credentials.")};return(0,n.jsxs)("div",{className:"max-w-5xl mx-auto px-4 lg:px-8 py-16 grid lg:grid-cols-2 gap-10 items-center",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("h1",{className:"text-4xl font-black text-white",children:"Welcome back"}),(0,n.jsx)("p",{className:"text-gray-300 text-lg",children:"Sign in to access your dashboard, offers, chat, and wallet."}),(0,n.jsxs)("ul",{className:"text-gray-300 text-sm space-y-1",children:[(0,n.jsx)("li",{children:"- Live offers in minutes"}),(0,n.jsx)("li",{children:"- Secure escrow payments"}),(0,n.jsx)("li",{children:"- Realtime chat and order rooms"})]})]}),(0,n.jsxs)(i.Z,{className:"p-8 border-white/15 bg-black/70",children:[(0,n.jsxs)("form",{className:"space-y-4",onSubmit:p,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-gray-300",children:"Email"}),(0,n.jsx)(o.I,{type:"email",value:r,onChange:e=>u(e.target.value),required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-gray-300",children:"Password"}),(0,n.jsx)(o.I,{type:"password",value:d,onChange:e=>h(e.target.value),required:!0})]}),f&&(0,n.jsx)("div",{className:"text-red-400 text-sm",children:f}),(0,n.jsx)(l.z,{type:"submit",className:"w-full",disabled:t,children:t?"Working...":"Sign In"})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm text-gray-400 mt-4",children:[(0,n.jsx)(s.default,{href:"/auth/forgot-password",className:"text-purple-300",children:"Forgot password?"}),(0,n.jsx)(s.default,{href:"/auth/signup",className:"text-purple-300",children:"Create account"})]})]})]})}},9116:function(e,t,r){"use strict";r.d(t,{h:function(){return a}});let n="http://localhost:8000".replace(/\/+$/,"")||"http://localhost:8000";async function s(e,t,r,s){if(!n)throw Error("API base not set");let a=t.startsWith("/")?t:"/".concat(t),l="".concat(n).concat(a),o={"Content-Type":"application/json"};s&&(o.Authorization="Bearer ".concat(s)),console.log("[api:web] ".concat(e," ").concat(l),null!=r?r:"");let i=await fetch(l,{method:e,headers:o,body:r?JSON.stringify(r):void 0,cache:"no-store"}),c=(i.headers.get("content-type")||"").includes("application/json"),u=null;if(c)u=await i.json().catch(()=>null);else{let e=await i.text().catch(()=>"");u=e?{message:e}:null}if(!i.ok){let t=u||{status:i.status};throw console.error("[api:web] ".concat(e," ").concat(a," failed"),{status:i.status,headers:Object.fromEntries(i.headers.entries()),body:t}),Error(("string"==typeof t?t:(null==t?void 0:t.detail)||(null==t?void 0:t.message)||JSON.stringify(t))||"Request failed")}return u}let a={get:(e,t)=>s("GET",e,void 0,t),post:(e,t,r)=>s("POST",e,t,r)}},5336:function(e,t,r){"use strict";r.d(t,{H:function(){return i},a:function(){return c}});var n=r(7437),s=r(2265),a=r(9116);let l=(0,s.createContext)(void 0),o="taskup_auth_v2";function i(e){let{children:t}=e,[r,i]=(0,s.useState)(null),[c,u]=(0,s.useState)(null),[d,h]=(0,s.useState)(!0);(0,s.useEffect)(()=>{try{let e=localStorage.getItem(o),t=null;e&&(t=JSON.parse(e),i(t.user),u(t.token)),(null==t?void 0:t.token)&&a.h.get("/api/auth/me",t.token).then(e=>{(null==e?void 0:e.user)&&f(e.user,t.token)}).catch(()=>{})}catch(e){}finally{h(!1)}},[]);let f=(e,t)=>{i(e),u(t),t?localStorage.setItem(o,JSON.stringify({user:e,token:t})):localStorage.removeItem(o)},g=async(e,t)=>{h(!0);try{var r;let n=await a.h.post("/api/auth/login",{email:e,password:t});return f(null!==(r=n.user)&&void 0!==r?r:n,n.access_token||n.token||null),{ok:!0}}catch(e){return console.error(e),{ok:!1,message:(null==e?void 0:e.message)||"Login failed"}}finally{h(!1)}},p=async function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"client";h(!0);try{var s;let l=await a.h.post("/api/auth/register",{full_name:e,email:t,password:r,role:n,language:"en"});return f(null!==(s=l.user)&&void 0!==s?s:l,l.access_token||l.token||null),{ok:!0}}catch(e){return console.error(e),{ok:!1,message:(null==e?void 0:e.message)||"Signup failed"}}finally{h(!1)}};return(0,n.jsx)(l.Provider,{value:{user:r,token:c,loading:d,login:g,register:p,logout:()=>f(null,null)},children:t})}function c(){let e=(0,s.useContext)(l);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return s.a}});var n=r(2972),s=r.n(n)},2381:function(e,t,r){"use strict";r.d(t,{z:function(){return l}});var n=r(7437),s=r(2265),a=r(1994);let l=e=>{let{children:t,className:r,variant:l="solid",size:o="md",asChild:i=!1,...c}=e,u=(0,a.Z)("inline-flex items-center justify-center rounded-xl font-semibold transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#0b0c15]",{solid:"bg-gradient-to-r from-[#8B5CFF] to-[#24c0f7] text-white shadow-[0_10px_40px_rgba(139,92,255,0.35)] hover:brightness-110",outline:"border border-white/20 text-white bg-white/5 hover:border-white/40 hover:bg-white/10 backdrop-blur",ghost:"text-white hover:bg-white/5"}[l],{sm:"px-3 py-2 text-sm",md:"px-4 py-2",lg:"px-5 py-3 text-lg"}[o],r);if(i&&s.isValidElement(t)){var d;return s.cloneElement(t,{className:(0,a.Z)(u,null===(d=t.props)||void 0===d?void 0:d.className)})}return(0,n.jsx)("button",{className:u,...c,children:t})}},9820:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(7437);r(2265);var s=r(1994);let a=e=>{let{className:t,children:r,...a}=e;return(0,n.jsx)("div",{className:(0,s.Z)("glass rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl shadow-lg shadow-purple-500/10",t),...a,children:r})}},279:function(e,t,r){"use strict";r.d(t,{I:function(){return l}});var n=r(7437),s=r(2265),a=r(1994);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("input",{ref:t,className:(0,a.Z)("w-full rounded-xl bg-white/5 border border-white/15 px-3 py-2 text-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B5CFF]/60 shadow-[0_10px_30px_rgba(0,0,0,0.35)] backdrop-blur",r),...s})});l.displayName="Input"},1994:function(e,t,r){"use strict";t.Z=function(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=function e(t){var r,n,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t)){var a=t.length;for(r=0;r<a;r++)t[r]&&(n=e(t[r]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n)}return s}(e))&&(n&&(n+=" "),n+=t);return n}}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=445)}),_N_E=e.O()}]);